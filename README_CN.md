<div align="center">

# ğŸš€ AI Gateway

**ä¸ªäººè½»é‡çº§ LLM API ç½‘å…³ï¼Œå¸¦å›¾å½¢ç•Œé¢**

[![Python](https://img.shields.io/badge/Python-3.10+-blue?logo=python&logoColor=white)](https://www.python.org/)
[![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey?logo=windows&logoColor=white)](https://www.microsoft.com/windows)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

[English](README.md) Â· [ç®€ä½“ä¸­æ–‡](#)

</div>

---

## âœ¨ ä¸ºä»€ä¹ˆé€‰æ‹© AI Gatewayï¼Ÿ

ç®¡ç†å¤šä¸ª LLM æä¾›å•†å¯èƒ½è®©äººå¤´ç–¼ï¼š

- ğŸ”´ ä¸åŒçš„ API æ ¼å¼ï¼ˆOpenAI vs Anthropic vs Geminiï¼‰
- ğŸ”´ API å¯†é’¥åˆ†æ•£åœ¨å„ä¸ªé¡¹ç›®ä¸­
- ğŸ”´ æä¾›å•†æ•…éšœæ—¶æ²¡æœ‰å¤‡ç”¨æ–¹æ¡ˆ
- ğŸ”´ é…ç½®æ–‡ä»¶å¤æ‚éš¾æ‡‚

**AI Gateway ç”¨ç®€æ´çš„å›¾å½¢ç•Œé¢å’Œç»Ÿä¸€çš„ API è§£å†³è¿™äº›é—®é¢˜ï¼š**

- âœ… **ä¸€ä¸ª API ç«¯ç‚¹** æ»¡è¶³æ‰€æœ‰ LLM éœ€æ±‚
- âœ… **å¤šæ ¼å¼æ”¯æŒ** â€” OpenAIã€Anthropicã€Gemini ä¸‰ç§æ ¼å¼
- âœ… **è‡ªåŠ¨æ ¼å¼è½¬æ¢** â€” ä¸åŒæä¾›å•†æ ¼å¼ä¹‹é—´æ— ç¼åˆ‡æ¢
- âœ… **é€šé“æ•…éšœè½¬ç§»** â€” æä¾›å•†å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢
- âœ… **ä»¤ç‰Œç®¡ç†** â€” å¯è§†åŒ–ç•Œé¢ç®¡ç†è®¿é—®ä»¤ç‰Œ
- âœ… **æ— éœ€ Dockerã€æ— éœ€æ•°æ®åº“** â€” å¼€ç®±å³ç”¨

---

## ğŸ“¸ æˆªå›¾é¢„è§ˆ

|                ä»ªè¡¨ç›˜                |               é€šé“ç®¡ç†                |
| :----------------------------------: | :-----------------------------------: |
| ![ä»ªè¡¨ç›˜](screenshots/dashboard.png) | ![é€šé“ç®¡ç†](screenshots/channels.png) |

|              ä»¤ç‰Œç®¡ç†               |               è®¾ç½®                |
| :---------------------------------: | :-------------------------------: |
| ![ä»¤ç‰Œç®¡ç†](screenshots/tokens.png) | ![è®¾ç½®](screenshots/settings.png) |

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- **å¤šæ ¼å¼ API æ”¯æŒ** â€” åŸç”Ÿæ”¯æŒ OpenAIã€Anthropicã€Gemini API æ ¼å¼
- **åŒå‘æ ¼å¼è½¬æ¢** â€” æ‰€æœ‰æ”¯æŒæ ¼å¼ä¹‹é—´è‡ªåŠ¨è½¬æ¢
- **å¤šæä¾›å•†æ”¯æŒ** â€” OpenAIã€Anthropicã€Gemini ä¸‰ç§æ ¼å¼
- **æµå¼å“åº”æ”¯æŒ** â€” å®Œæ•´ SSE æµå¼ä¼ è¾“ï¼Œæ”¯æŒå®æ—¶æ ¼å¼è½¬æ¢
- **é€šé“æ•…éšœè½¬ç§»** â€” è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¯ç”¨é€šé“
- **é«˜å¯ç”¨æ¨¡å¼** â€” å¿½ç•¥æ¨¡å‹å‚æ•°ï¼Œè·¯ç”±åˆ°ä»»æ„å¯ç”¨é€šé“
- **ä»¤ç‰Œè®¤è¯** â€” ä¿æŠ¤ä½ çš„ç½‘å…³å®‰å…¨
- **ä»£ç†æ”¯æŒ** â€” æ¯ä¸ªé€šé“å¯é…ç½® HTTP/SOCKS5 ä»£ç†
- **å›¾å½¢ç•Œé¢** â€” æ— éœ€ç¼–è¾‘é…ç½®æ–‡ä»¶
- **è½»é‡çº§** â€” Windows å•æ–‡ä»¶ EXEï¼Œæ— ä¾èµ–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä»æºç è¿è¡Œ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/h0110wbit/ai-gateway.git
cd ai-gateway

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å›¾å½¢ç•Œé¢
python main.py
```

### æ„å»º Windows EXE

```bash
build.bat
```

å¯æ‰§è¡Œæ–‡ä»¶å°†ç”Ÿæˆåœ¨ `dist/AIGateway.exe`ã€‚

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. æ·»åŠ é€šé“

å¯¼èˆªè‡³ **é€šé“** â†’ **+ æ·»åŠ é€šé“**ï¼š

| å­—æ®µ     | è¯´æ˜                                          |
| -------- | --------------------------------------------- |
| åç§°     | å‹å¥½åç§°ï¼ˆå¦‚ "OpenAI GPT-4"ï¼‰                 |
| ç±»å‹     | openai / anthropic / gemini / ollama / custom |
| åŸºç¡€ URL | æä¾›å•† API ç«¯ç‚¹                               |
| API å¯†é’¥ | ä½ çš„æä¾›å•† API å¯†é’¥                           |
| æ¨¡å‹     | é€—å·åˆ†éš”åˆ—è¡¨ï¼ˆç•™ç©º = æ‰€æœ‰æ¨¡å‹ï¼‰               |
| ä¼˜å…ˆçº§   | æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜                            |

**é»˜è®¤åŸºç¡€ URLï¼š**

| æä¾›å•†    | åŸºç¡€ URL                                    |
| --------- | ------------------------------------------- |
| OpenAI    | `https://api.openai.com/v1`                 |
| Anthropic | `https://api.anthropic.com`                 |
| Gemini    | `https://generativelanguage.googleapis.com` |
| Ollama    | `http://localhost:11434`                    |

### 2. åˆ›å»ºè®¿é—®ä»¤ç‰Œ

å¯¼èˆªè‡³ **ä»¤ç‰Œ** â†’ **+ åˆ›å»ºä»¤ç‰Œ**

åœ¨å®¢æˆ·ç«¯çš„ `Authorization: Bearer <token>` è¯·æ±‚å¤´ä¸­ä½¿ç”¨æ­¤ä»¤ç‰Œã€‚

### 3. å¯åŠ¨ç½‘å…³

å¯¼èˆªè‡³ **ä»ªè¡¨ç›˜** â†’ ç‚¹å‡» **â–¶ å¯åŠ¨ç½‘å…³**

é»˜è®¤ç«¯ç‚¹ï¼š`http://localhost:3000`

### 4. è¿æ¥ä½ çš„å®¢æˆ·ç«¯

```python
from openai import OpenAI

client = OpenAI(
    base_url="http://localhost:3000/v1",
    api_key="your-gateway-token",
)

response = client.chat.completions.create(
    model="gpt-4o",
    messages=[{"role": "user", "content": "ä½ å¥½ï¼"}]
)
```

---

## ğŸ”Œ API ç«¯ç‚¹

### OpenAI å…¼å®¹ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„                   | è¯´æ˜                 |
| ---- | ---------------------- | -------------------- |
| GET  | `/health`              | å¥åº·æ£€æŸ¥             |
| GET  | `/v1/models`           | åˆ—å‡ºå¯ç”¨æ¨¡å‹         |
| POST | `/v1/chat/completions` | èŠå¤©è¡¥å…¨ï¼ˆæ”¯æŒæµå¼ï¼‰ |

### Anthropic å…¼å®¹ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„           | è¯´æ˜                               |
| ---- | -------------- | ---------------------------------- |
| POST | `/v1/messages` | Anthropic Messages APIï¼ˆæ”¯æŒæµå¼ï¼‰ |

### Gemini å…¼å®¹ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„                                     | è¯´æ˜                               |
| ---- | ---------------------------------------- | ---------------------------------- |
| POST | `/v1beta/models/{model}:generateContent` | Gemini generateContentï¼ˆæ”¯æŒæµå¼ï¼‰ |

---

## ğŸ”„ æ ¼å¼è½¬æ¢

AI Gateway æ”¯æŒ **OpenAI**ã€**Anthropic** å’Œ **Gemini** æ ¼å¼ä¹‹é—´çš„åŒå‘è½¬æ¢ï¼š

| å®¢æˆ·ç«¯æ ¼å¼ | é€šé“ç±»å‹  | è½¬æ¢æ–¹å¼      |
| ---------- | --------- | ------------- |
| OpenAI     | Anthropic | è¯·æ±‚/å“åº”è½¬æ¢ |
| OpenAI     | Gemini    | è¯·æ±‚/å“åº”è½¬æ¢ |
| Anthropic  | OpenAI    | è¯·æ±‚/å“åº”è½¬æ¢ |
| Anthropic  | Gemini    | è¯·æ±‚/å“åº”è½¬æ¢ |
| Gemini     | OpenAI    | è¯·æ±‚/å“åº”è½¬æ¢ |
| Gemini     | Anthropic | è¯·æ±‚/å“åº”è½¬æ¢ |

æµå¼å“åº”é€šè¿‡ SSE å®æ—¶è½¬æ¢ã€‚

---

## ğŸ› ï¸ é›†æˆç¤ºä¾‹

### OpenAI SDK

```python
from openai import OpenAI

client = OpenAI(
    base_url="http://localhost:3000/v1",
    api_key="your-gateway-token",
)

response = client.chat.completions.create(
    model="gpt-4o",
    messages=[{"role": "user", "content": "ä½ å¥½ï¼"}],
    stream=True
)

for chunk in response:
    print(chunk.choices[0].delta.content, end="")
```

### Anthropic SDK

```python
from anthropic import Anthropic

client = Anthropic(
    base_url="http://localhost:3000",
    api_key="your-gateway-token",
)

response = client.messages.create(
    model="claude-sonnet-4-20250514",
    max_tokens=1024,
    messages=[{"role": "user", "content": "ä½ å¥½ï¼"}]
)
```

### Google Gemini SDK

```python
import httpx

response = httpx.post(
    "http://localhost:3000/v1beta/models/gemini-pro:generateContent",
    headers={"x-goog-api-key": "your-gateway-token"},
    json={
        "contents": [{"parts": [{"text": "ä½ å¥½ï¼"}]}]
    }
)
print(response.json())
```

### Claude Code CLI

```bash
export ANTHROPIC_BASE_URL=http://localhost:3000
export ANTHROPIC_API_KEY=your-gateway-token

claude
```

### cURLï¼ˆOpenAI æ ¼å¼ï¼‰

```bash
curl http://localhost:3000/v1/chat/completions \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o",
    "messages": [{"role": "user", "content": "ä½ å¥½ï¼"}],
    "stream": true
  }'
```

### cURLï¼ˆAnthropic æ ¼å¼ï¼‰

```bash
curl http://localhost:3000/v1/messages \
  -H "x-api-key: your-token" \
  -H "anthropic-version: 2023-06-01" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "claude-sonnet-4-20250514",
    "max_tokens": 1024,
    "messages": [{"role": "user", "content": "ä½ å¥½ï¼"}],
    "stream": true
  }'
```

### cURLï¼ˆGemini æ ¼å¼ï¼‰

```bash
curl "http://localhost:3000/v1beta/models/gemini-pro:generateContent" \
  -H "x-goog-api-key: your-token" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{"parts": [{"text": "ä½ å¥½ï¼"}]}]
  }'
```

---

## âš¡ é«˜å¯ç”¨æ¨¡å¼

åœ¨ä»ªè¡¨ç›˜å¯ç”¨ **é«˜å¯ç”¨æ¨¡å¼**ï¼Œå¯å°†è¯·æ±‚è·¯ç”±åˆ°ä»»æ„å¯ç”¨é€šé“ï¼Œå¿½ç•¥æ¨¡å‹å‚æ•°ã€‚å½“ä½ éœ€è¦æœ€å¤§å¯ç”¨æ€§ä¸”ä¸å…³å¿ƒå…·ä½“å“ªä¸ªæ¨¡å‹å“åº”æ—¶éå¸¸æœ‰ç”¨ã€‚

å¯ç”¨åï¼š

- ç½‘å…³å¿½ç•¥è¯·æ±‚ä¸­çš„ `model` å‚æ•°
- æ ¹æ®ä¼˜å…ˆçº§è·¯ç”±åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨é€šé“
- ä½¿ç”¨è¯¥é€šé“é…ç½®çš„ç¬¬ä¸€ä¸ªæ¨¡å‹

---

## âš™ï¸ é…ç½®è¯´æ˜

é…ç½®å­˜å‚¨åœ¨ `config.json` ä¸­ï¼š

```json
{
  "settings": {
    "host": "0.0.0.0",
    "port": 3000,
    "require_auth": true,
    "enable_fallback": true,
    "enable_cors": true,
    "high_availability_mode": false
  },
  "channels": [
    {
      "id": 1,
      "name": "OpenAI",
      "type": "openai",
      "base_url": "https://api.openai.com/v1",
      "api_key": "sk-...",
      "models": ["gpt-4o", "gpt-4o-mini"],
      "enabled": true,
      "priority": 1,
      "timeout": 60,
      "proxy_enabled": false,
      "proxy_url": ""
    }
  ],
  "tokens": [
    {
      "id": 1,
      "name": "My Token",
      "key": "sk-gw-...",
      "enabled": true,
      "allowed_channels": [],
      "allowed_models": []
    }
  ]
}
```

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
ai-gateway/
â”œâ”€â”€ main.py                    # å…¥å£æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ server.py          # FastAPI æœåŠ¡å™¨ + ç«¯ç‚¹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ proxy.py           # è¯·æ±‚è·¯ç”± + ä¸Šæ¸¸ä»£ç†
â”‚   â”‚   â””â”€â”€ converter.py       # æ ¼å¼è½¬æ¢ï¼ˆOpenAI/Anthropic/Geminiï¼‰
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ config.py          # Pydantic é…ç½®æ¨¡å‹
â”‚   â””â”€â”€ gui/
â”‚       â”œâ”€â”€ app.py             # wxPython åº”ç”¨
â”‚       â”œâ”€â”€ main_frame.py      # ä¸»çª—å£ + ä¾§è¾¹æ 
â”‚       â”œâ”€â”€ controller.py      # ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ theme.py           # é…è‰²æ–¹æ¡ˆ + æ ·å¼
â”‚       â”œâ”€â”€ widgets.py         # å¯å¤ç”¨ UI ç»„ä»¶
â”‚       â””â”€â”€ panels/
â”‚           â”œâ”€â”€ dashboard.py
â”‚           â”œâ”€â”€ channels.py
â”‚           â”œâ”€â”€ tokens.py
â”‚           â””â”€â”€ settings.py
â””â”€â”€ config.json                # è¿è¡Œæ—¶é…ç½®
```

---

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£å¼‚æ­¥ Web æ¡†æ¶
- [wxPython](https://www.wxpython.org/) - è·¨å¹³å° GUI å·¥å…·åŒ…
- [httpx](https://www.python-httpx.org/) - ç°ä»£å¼‚æ­¥ HTTP å®¢æˆ·ç«¯

---

<div align="center">

**[â¬† è¿”å›é¡¶éƒ¨](#-ai-gateway)**

Made with â¤ï¸ by [h0110wbit](https://github.com/h0110wbit)

</div>
